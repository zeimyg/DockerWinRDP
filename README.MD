## Documentaci贸n de DockerWinRDP-Guacamole

---

### **Introducci贸n**

Esta documentaci贸n proporciona una gu铆a completa y f谩cil de entender sobre **DockerWinRDP-Guacamole**, dise帽ada para usuarios de todos los niveles, desde principiantes hasta expertos. Aqu铆 encontrar谩s toda la informaci贸n necesaria para entender, instalar, configurar y utilizar DockerWinRDP-Guacamole.

---

### **Descripci贸n del Proyecto**

#### **Resumen:**
**DockerWinRDP-Guacamole** es una soluci贸n que combina **Docker**, **Apache Guacamole** y un contenedor Windows RDP para proporcionar acceso remoto seguro a trav茅s de un navegador web. Este proyecto resuelve el problema de acceder a entornos Windows desde cualquier dispositivo con un navegador, sin necesidad de software adicional.

#### **Principales caracter铆sticas y beneficios:**
- **Acceso remoto seguro**: Usa Apache Guacamole para acceder al escritorio remoto a trav茅s de un navegador.
- **Automatizaci贸n**: Scripts de instalaci贸n y configuraci贸n simplifican el despliegue.
- **Personalizaci贸n**: Permite configurar credenciales, conexiones RDP y MySQL seg煤n las necesidades del usuario.
- **Escalabilidad**: Compatible con m煤ltiples usuarios y conexiones simult谩neas.
- **Portabilidad**: Todo se ejecuta dentro de contenedores Docker, lo que facilita su implementaci贸n en diferentes sistemas.

---

### **Requisitos del Proyecto**

#### **Herramientas y software necesarios:**
1. **Sistema Operativo**: Kali Linux o cualquier distribuci贸n basada en Debian/Ubuntu.
2. **Docker**: Instalado y configurado correctamente.
   ```bash
   sudo apt update
   sudo apt install -y docker.io docker-compose
   ```
3. **Git**: Para clonar el repositorio.
   ```bash
   sudo apt install -y git
   ```
4. **Python 3.x**: Necesario para compilar el bot de Discord (opcional).
   ```bash
   sudo apt install -y python3 python3-pip
   ```

---

### **Gu铆a de Instalaci贸n**

#### **Paso 1: Clona el repositorio**
Clona el repositorio en tu m谩quina local:
```bash
git clone https://github.com/tu-usuario/DockerWinRDP-Guacamole.git
cd DockerWinRDP-Guacamole
```

#### **Paso 2: Construcci贸n del proyecto**
Ejecuta el script `setup.sh` para instalar dependencias, construir el contenedor y configurar el entorno:
```bash
chmod +x setup.sh install.sh configure.sh
./setup.sh
```

Durante la ejecuci贸n, el script te pedir谩:
- Credenciales para el usuario RDP (`RDP_USER` y `RDP_PASSWORD`).
- Si deseas configurar MySQL para Guacamole (opcional).

#### **Paso 3: Configuraci贸n inicial**
El script `setup.sh` ejecutar谩 autom谩ticamente los scripts `install.sh` y `configure.sh`. Estos scripts:
- Instalan Docker y otras dependencias.
- Construyen el contenedor DockerWinRDP.
- Despliegan Apache Guacamole y configuran la conexi贸n RDP.

---

### **Gu铆a de Uso**

#### **Uso b谩sico:**
1. Accede a Guacamole en tu navegador:
   ```
   http://localhost:8080/guacamole
   ```
2. Inicia sesi贸n con las credenciales predeterminadas:
   - Usuario: `guacadmin`
   - Contrase帽a: `guacadmin`

3. Con茅ctate al escritorio remoto utilizando la conexi贸n `DockerWinRDP`.

#### **Ejemplo pr谩ctico:**
Para reiniciar el contenedor desde Discord, usa el comando `/reiniciar` (requiere permisos de administrador):
```bash
/reiniciar
```

#### **Comandos principales:**
- `/hello`: Saludo simple con un bot贸n interactivo.
- `/menu`: Muestra un men煤 desplegable con opciones.
- `/status`: Verifica el estado y latencia del bot.
- `/help`: Lista los comandos disponibles.
- `/random`: Genera un n煤mero aleatorio entre 1 y 100.
- `/avatar`: Obtiene el avatar de un usuario.
- `/poll`: Crea una encuesta simple con botones "S铆" y "No".
- `/reiniciar`: Reinicia el contenedor (solo administradores).
- `/logs`: Env铆a los logs del bot al canal (solo administradores).

---

### **Documentaci贸n T茅cnica**

#### **Arquitectura del Proyecto:**
El proyecto utiliza una arquitectura modular basada en contenedores Docker:
1. **DockerWinRDP**: Contenedor Windows con RDP habilitado.
2. **Apache Guacamole**: Interfaz web para acceder al escritorio remoto.
3. **MySQL (opcional)**: Base de datos para almacenar configuraciones y conexiones.
4. **Bot de Discord**: Interfaz para interactuar con el sistema mediante comandos.

#### **Componentes principales:**
- **Dockerfile**: Define el contenedor DockerWinRDP.
- **docker-compose.yml**: Configura los servicios de Guacamole, `guacd` y MySQL.
- **bot.py**: Implementa el bot de Discord para interactuar con el sistema.
- **start.ps1**: Script de PowerShell que mantiene el contenedor activo y configura RDP.

#### **C贸digo fuente:**
El c贸digo est谩 organizado en carpetas y archivos modulares:
- **Scripts**: `setup.sh`, `install.sh`, `configure.sh` automatizan la instalaci贸n y configuraci贸n.
- **Logs**: Carpeta `logs/` almacena los registros generados por los scripts.
- **MySQL**: Carpeta `mysql-init/` contiene el archivo `initdb.sql` para inicializar la base de datos (si se usa MySQL).

---

### **Mantenimiento y Soluci贸n de Problemas**

#### **Verificaci贸n de logs:**
Para revisar los logs del proyecto:
1. Logs del script `setup.sh`:
   ```bash
   cat logs/setup.log
   ```
2. Logs del bot de Discord:
   ```bash
   cat bot.log
   ```
3. Logs de Docker:
   ```bash
   docker logs <nombre-del-contenedor>
   ```

#### **Soluci贸n de problemas comunes:**
- **Error al iniciar Docker**: Aseg煤rate de que Docker est茅 instalado y ejecut谩ndose.
  ```bash
  sudo systemctl start docker
  ```
- **Error al conectar a Guacamole**: Verifica que los puertos no est茅n ocupados y que los servicios est茅n activos.
  ```bash
  docker-compose ps
  ```
- **Error en el bot de Discord**: Revisa que el token del bot est茅 configurado correctamente en las variables de entorno.

---

### **Conclusi贸n**

**DockerWinRDP-Guacamole** es una soluci贸n robusta y flexible para acceder remotamente a un entorno Windows desde cualquier navegador. Con esta documentaci贸n, deber铆as poder instalar, configurar y utilizar el proyecto sin problemas. Si tienes preguntas adicionales o encuentras errores, consulta la secci贸n de [issues](https://github.com/tu-usuario/DockerWinRDP-Guacamole/issues) en el repositorio.

--- 

Espero que esta documentaci贸n sea 煤til y completa para tus necesidades. 
